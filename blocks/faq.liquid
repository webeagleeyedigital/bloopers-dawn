{% doc %}
  @prompt
    Please make a tab section in which every tab include faqs
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
.ai-faq-tabs-container-{{ ai_gen_id }} {
  max-width: {{ block.settings.container_width }}px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.ai-faq-tabs {
  border: 1px solid #EFEFEF;
  padding: 45px 100px;
  border-radius: 8px;
}

.ai-faq-tabs-heading-{{ ai_gen_id }} {
  width: fit-content;
  text-align: center;
  font-weight: 700;
  line-height: 42px;
  border-bottom: 2px solid #FF980C;
  color: {{ block.settings.heading_color }};
  font-size: {{ block.settings.heading_size }}px;
}

.ai-faq-tabs-para-{{ ai_gen_id }} {
  text-align: center;
  margin-bottom: 32px;
  margin-top: 10px;
  color: {{ block.settings.paragraph_color }};
  font-size: {{ block.settings.paragraph_size }}px;
}

.ai-faq-tabs-nav-{{ ai_gen_id }} {
  display: -webkit-flex; /* Safari 6.1+ */
  display: -ms-flexbox;  /* IE 10 */
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 32px;
  flex-wrap: wrap;
}

.ai-faq-tab-button-{{ ai_gen_id }} {
  padding: 12px 24px;
  background-color: {{ block.settings.tab_bg_color }};
  color: {{ block.settings.tab_text_color }};
  border: 1px solid {{ block.settings.tab_border_color }};
  border-radius: {{ block.settings.tab_border_radius }}px;
  cursor: pointer;
  -webkit-transition: all 0.3s ease;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  transition: all 0.3s ease;
  font-size: 16px;
  font-weight: 400;
  line-height: 20px;
}

.ai-faq-tab-button-{{ ai_gen_id }}:hover, .ai-faq-tab-button-{{ ai_gen_id }}:focus {
  background-color: {{ block.settings.tab_hover_bg_color }} !important;
  color: {{ block.settings.tab_hover_text_color }};
  border: none !important;
  box-shadow: 0px 3px 2px 0px #00000026 !important;
}

.ai-faq-tab-button-{{ ai_gen_id }}.active {
  background-color: {{ block.settings.tab_active_bg_color }};
  color: {{ block.settings.tab_active_text_color }};
  border-color: {{ block.settings.tab_active_border_color }};
  box-shadow: 0px 3px 2px 0px #00000026;
}

.ai-faq-tab-content-{{ ai_gen_id }} {
  display: none;
}

.ai-faq-tab-content-{{ ai_gen_id }}.active {
  display: block;
}

.ai-faq-item-{{ ai_gen_id }} {
  border: 1px solid {{ block.settings.faq_border_color }};
  border-radius: {{ block.settings.faq_border_radius }}px;
  margin-bottom: 12px;
  overflow: hidden;
}

.ai-faq-question-{{ ai_gen_id }} {
  width: 100%;
  padding: 14px 20px;
  background-color: {{ block.settings.question_bg_color }};
  color: {{ block.settings.question_text_color }};
  border: none;
  text-align: left;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 16px;
  font-weight: 500;
  transition: background-color 0.3s ease;
}

.ai-faq-question-{{ ai_gen_id }}:hover {
  background-color: {{ block.settings.question_hover_bg_color }};
}

.ai-faq-question-{{ ai_gen_id }}.active {
  background-color: {{ block.settings.question_active_bg_color }};
  color: {{ block.settings.question_active_text_color }};
}

.ai-faq-icon-{{ ai_gen_id }} {
  width: 30px;
  height: 30px;
  transition: transform 0.3s ease;
  flex-shrink: 0;
  margin-left: 10px;
  color: #0074FA;
  background: #E4EBF2;
  border-radius: 50%;
  padding: 5px;
}

.ai-faq-question-{{ ai_gen_id }}.active .ai-faq-icon-{{ ai_gen_id }} {
  transform: rotate(180deg);
}

.ai-faq-answer-{{ ai_gen_id }} {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
  background-color: {{ block.settings.answer_bg_color }};
}

.ai-faq-answer-{{ ai_gen_id }}.active {
  max-height: 1000px;
}

.ai-faq-answer-content-{{ ai_gen_id }} {
  padding: 0px 20px 18px;
  color: {{ block.settings.answer_text_color }};
  line-height: 1.6;
}

  @media screen and (min-width: 768px) and (max-width: 1023.98px) {
    .ai-faq-tabs {
      border: none;
      padding: 0;
      border-radius: 8px;
    }
  }

  @media screen and (max-width: 768px) {
    .ai-faq-tabs {
      border: none;
      padding: 0;
      border-radius: 8px;
    }
    .ai-faq-tabs-heading-{{ ai_gen_id }} {
      font-size: 20px;
      line-height: 28px;
    }
    .ai-faq-tabs-para-{{ ai_gen_id }} {
      font-size: 14px;
      margin-bottom: 20px;
    }
    .ai-faq-tabs-nav-{{ ai_gen_id }} {
      gap: 14px;
      margin-bottom: 16px;
    }
    .ai-faq-tab-button-{{ ai_gen_id }} {
      padding: 10px 20px;
      font-size: 14px;
      line-height: 18px;
    }
    .ai-faq-question-{{ ai_gen_id }} {
      padding: 12px 16px;
      font-size: 14px;
    }
    .ai-faq-answer-content-{{ ai_gen_id }} {
      padding: 0px 16px 12px;
      font-size: 12px;
      line-height: 1.6;
    }
    .ai-faq-icon-{{ ai_gen_id }} {
      width: 22px;
      height: 22px;
      padding: 5px;
    }
  }
{% endstyle %}

<faq-tabs-{{ ai_gen_id }} class="ai-faq-tabs-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-faq-tabs-container-{{ ai_gen_id }}">
    <h2 class="ai-faq-tabs-heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    <p class="ai-faq-tabs-para-{{ ai_gen_id }}">{{ block.settings.paragraph }}</p>
    <div class="ai-faq-tabs">
      <div class="ai-faq-tabs-nav-{{ ai_gen_id }}">
        {% for i in (1..4) %}
          {% assign tab_title_key = 'tab_' | append: i | append: '_title' %}
          {% assign tab_title = block.settings[tab_title_key] %}
          {% if tab_title != blank %}
            <button 
              class="ai-faq-tab-button-{{ ai_gen_id }} {% if i == 1 %}active{% endif %}" 
              data-tab="{{ i }}"
              aria-expanded="{% if i == 1 %}true{% else %}false{% endif %}"
            >
              {{ tab_title }}
            </button>
          {% endif %}
        {% endfor %}
      </div>

      {% for tab_num in (1..4) %}
        {% assign tab_title_key = 'tab_' | append: tab_num | append: '_title' %}
        {% assign tab_title = block.settings[tab_title_key] %}
        
        {% if tab_title != blank %}
          <div class="ai-faq-tab-content-{{ ai_gen_id }} {% if tab_num == 1 %}active{% endif %}" data-tab-content="{{ tab_num }}">
            {% for faq_num in (1..5) %}
              {% assign question_key = 'tab_' | append: tab_num | append: '_faq_' | append: faq_num | append: '_question' %}
              {% assign answer_key = 'tab_' | append: tab_num | append: '_faq_' | append: faq_num | append: '_answer' %}
              {% assign question = block.settings[question_key] %}
              {% assign answer = block.settings[answer_key] %}
              
              {% if question != blank %}
                <div class="ai-faq-item-{{ ai_gen_id }}">
                  <button 
                    class="ai-faq-question-{{ ai_gen_id }}"
                    aria-expanded="false"
                  >
                    <span>{{ question }}</span>
                    <svg class="ai-faq-icon-{{ ai_gen_id }}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </button>
                  <div class="ai-faq-answer-{{ ai_gen_id }}">
                    <div class="ai-faq-answer-content-{{ ai_gen_id }}">
                      {{ answer }}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</faq-tabs-{{ ai_gen_id }}>

<script>
  (function() {
    class FaqTabs{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.tabButtons = this.querySelectorAll('.ai-faq-tab-button-{{ ai_gen_id }}');
        this.tabContents = this.querySelectorAll('.ai-faq-tab-content-{{ ai_gen_id }}');
        this.faqQuestions = this.querySelectorAll('.ai-faq-question-{{ ai_gen_id }}');

        this.setupTabListeners();
        this.setupFaqListeners();
      }

      setupTabListeners() {
        this.tabButtons.forEach((button) => {
          button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');

            this.tabButtons.forEach((btn) => {
              btn.classList.remove('active');
              btn.setAttribute('aria-expanded', 'false');
            });
            button.classList.add('active');
            button.setAttribute('aria-expanded', 'true');

            this.tabContents.forEach((content) => {
              content.classList.remove('active');
            });

            const activeContent = this.querySelector(`[data-tab-content="${tabId}"]`);
            if (activeContent) {
              activeContent.classList.add('active');
            }

            const activeFaqs = activeContent.querySelectorAll('.ai-faq-question-{{ ai_gen_id }}.active');
            activeFaqs.forEach((faq) => {
              faq.classList.remove('active');
              faq.setAttribute('aria-expanded', 'false');
              const answer = faq.nextElementSibling;
              if (answer) {
                answer.classList.remove('active');
              }
            });
          });
        });
      }

      setupFaqListeners() {
        this.faqQuestions.forEach((question) => {
          question.addEventListener('click', () => {
            const isActive = question.classList.contains('active');
            const answer = question.nextElementSibling;

            question.classList.toggle('active');
            question.setAttribute('aria-expanded', !isActive);
            
            if (answer) {
              answer.classList.toggle('active');
            }
          });
        });
      }
    }

    customElements.define('faq-tabs-{{ ai_gen_id }}', FaqTabs{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "FAQ tabs",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "General"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#2c2c2c"
    },
    {
      "type": "text",
      "id": "paragraph",
      "label": "Paragraph",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "range",
      "id": "paragraph_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "color",
      "id": "paragraph_color",
      "label": "Heading color",
      "default": "#2c2c2c"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 600,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "label": "Container width",
      "default": 1000
    },
    {
      "type": "header",
      "content": "Tab style"
    },
    {
      "type": "color",
      "id": "tab_bg_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "tab_text_color",
      "label": "Text",
      "default": "#2c2c2c"
    },
    {
      "type": "color",
      "id": "tab_border_color",
      "label": "Border",
      "default": "#ebeeee"
    },
    {
      "type": "color",
      "id": "tab_hover_bg_color",
      "label": "Hover background",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "tab_hover_text_color",
      "label": "Hover text",
      "default": "#2c2c2c"
    },
    {
      "type": "color",
      "id": "tab_active_bg_color",
      "label": "Active background",
      "default": "#2c2c2c"
    },
    {
      "type": "color",
      "id": "tab_active_text_color",
      "label": "Active text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "tab_active_border_color",
      "label": "Active border",
      "default": "#2c2c2c"
    },
    {
      "type": "range",
      "id": "tab_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "FAQ style"
    },
    {
      "type": "color",
      "id": "faq_border_color",
      "label": "Border",
      "default": "#ebeeee"
    },
    {
      "type": "range",
      "id": "faq_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "color",
      "id": "question_bg_color",
      "label": "Question background",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "question_text_color",
      "label": "Question text",
      "default": "#2c2c2c"
    },
    {
      "type": "color",
      "id": "question_hover_bg_color",
      "label": "Question hover background",
      "default": "#f0f0f0"
    },
    {
      "type": "color",
      "id": "question_active_bg_color",
      "label": "Question active background",
      "default": "#2c2c2c"
    },
    {
      "type": "color",
      "id": "question_active_text_color",
      "label": "Question active text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "answer_bg_color",
      "label": "Answer background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "answer_text_color",
      "label": "Answer text",
      "default": "#707070"
    },
    {
      "type": "header",
      "content": "Tab 1"
    },
    {
      "type": "text",
      "id": "tab_1_title",
      "label": "Tab title",
      "default": "General"
    },
    {
      "type": "text",
      "id": "tab_1_faq_1_question",
      "label": "Question 1",
      "default": "What is your return policy?"
    },
    {
      "type": "richtext",
      "id": "tab_1_faq_1_answer",
      "label": "Answer 1",
      "default": "<p>We offer a 30-day return policy on all items. Products must be in original condition with tags attached.</p>"
    },
    {
      "type": "text",
      "id": "tab_1_faq_2_question",
      "label": "Question 2",
      "default": "How long does shipping take?"
    },
    {
      "type": "richtext",
      "id": "tab_1_faq_2_answer",
      "label": "Answer 2",
      "default": "<p>Standard shipping takes 5-7 business days. Express shipping is available for 2-3 business days delivery.</p>"
    },
    {
      "type": "text",
      "id": "tab_1_faq_3_question",
      "label": "Question 3",
      "default": "Do you ship internationally?"
    },
    {
      "type": "richtext",
      "id": "tab_1_faq_3_answer",
      "label": "Answer 3",
      "default": "<p>Yes, we ship to most countries worldwide. International shipping times vary by location.</p>"
    },
    {
      "type": "text",
      "id": "tab_1_faq_4_question",
      "label": "Question 4"
    },
    {
      "type": "richtext",
      "id": "tab_1_faq_4_answer",
      "label": "Answer 4"
    },
    {
      "type": "text",
      "id": "tab_1_faq_5_question",
      "label": "Question 5"
    },
    {
      "type": "richtext",
      "id": "tab_1_faq_5_answer",
      "label": "Answer 5"
    },
    {
      "type": "header",
      "content": "Tab 2"
    },
    {
      "type": "text",
      "id": "tab_2_title",
      "label": "Tab title",
      "default": "Products"
    },
    {
      "type": "text",
      "id": "tab_2_faq_1_question",
      "label": "Question 1",
      "default": "How do I choose the right size?"
    },
    {
      "type": "richtext",
      "id": "tab_2_faq_1_answer",
      "label": "Answer 1",
      "default": "<p>Please refer to our size guide available on each product page. If you're between sizes, we recommend sizing up.</p>"
    },
    {
      "type": "text",
      "id": "tab_2_faq_2_question",
      "label": "Question 2",
      "default": "Are your products eco-friendly?"
    },
    {
      "type": "richtext",
      "id": "tab_2_faq_2_answer",
      "label": "Answer 2",
      "default": "<p>We are committed to sustainability and use eco-friendly materials whenever possible.</p>"
    },
    {
      "type": "text",
      "id": "tab_2_faq_3_question",
      "label": "Question 3",
      "default": "How should I care for my products?"
    },
    {
      "type": "richtext",
      "id": "tab_2_faq_3_answer",
      "label": "Answer 3",
      "default": "<p>Care instructions are included with each product. Generally, we recommend gentle washing and air drying.</p>"
    },
    {
      "type": "text",
      "id": "tab_2_faq_4_question",
      "label": "Question 4"
    },
    {
      "type": "richtext",
      "id": "tab_2_faq_4_answer",
      "label": "Answer 4"
    },
    {
      "type": "text",
      "id": "tab_2_faq_5_question",
      "label": "Question 5"
    },
    {
      "type": "richtext",
      "id": "tab_2_faq_5_answer",
      "label": "Answer 5"
    },
    {
      "type": "header",
      "content": "Tab 3"
    },
    {
      "type": "text",
      "id": "tab_3_title",
      "label": "Tab title",
      "default": "Payment"
    },
    {
      "type": "text",
      "id": "tab_3_faq_1_question",
      "label": "Question 1",
      "default": "What payment methods do you accept?"
    },
    {
      "type": "richtext",
      "id": "tab_3_faq_1_answer",
      "label": "Answer 1",
      "default": "<p>We accept all major credit cards, PayPal, and other secure payment methods.</p>"
    },
    {
      "type": "text",
      "id": "tab_3_faq_2_question",
      "label": "Question 2",
      "default": "Is my payment information secure?"
    },
    {
      "type": "richtext",
      "id": "tab_3_faq_2_answer",
      "label": "Answer 2",
      "default": "<p>Yes, all transactions are encrypted and processed through secure payment gateways.</p>"
    },
    {
      "type": "text",
      "id": "tab_3_faq_3_question",
      "label": "Question 3",
      "default": "Can I use multiple payment methods?"
    },
    {
      "type": "richtext",
      "id": "tab_3_faq_3_answer",
      "label": "Answer 3",
      "default": "<p>Currently, we only accept one payment method per order.</p>"
    },
    {
      "type": "text",
      "id": "tab_3_faq_4_question",
      "label": "Question 4"
    },
    {
      "type": "richtext",
      "id": "tab_3_faq_4_answer",
      "label": "Answer 4"
    },
    {
      "type": "text",
      "id": "tab_3_faq_5_question",
      "label": "Question 5"
    },
    {
      "type": "richtext",
      "id": "tab_3_faq_5_answer",
      "label": "Answer 5"
    },
    {
      "type": "header",
      "content": "Tab 4"
    },
    {
      "type": "text",
      "id": "tab_4_title",
      "label": "Tab title",
      "default": "Payment"
    },
    {
      "type": "text",
      "id": "tab_4_faq_1_question",
      "label": "Question 1",
      "default": "What payment methods do you accept?"
    },
    {
      "type": "richtext",
      "id": "tab_4_faq_1_answer",
      "label": "Answer 1",
      "default": "<p>We accept all major credit cards, PayPal, and other secure payment methods.</p>"
    },
    {
      "type": "text",
      "id": "tab_4_faq_2_question",
      "label": "Question 2",
      "default": "Is my payment information secure?"
    },
    {
      "type": "richtext",
      "id": "tab_4_faq_2_answer",
      "label": "Answer 2",
      "default": "<p>Yes, all transactions are encrypted and processed through secure payment gateways.</p>"
    },
    {
      "type": "text",
      "id": "tab_4_faq_3_question",
      "label": "Question 3",
      "default": "Can I use multiple payment methods?"
    },
    {
      "type": "richtext",
      "id": "tab_4_faq_3_answer",
      "label": "Answer 3",
      "default": "<p>Currently, we only accept one payment method per order.</p>"
    },
    {
      "type": "text",
      "id": "tab_4_faq_4_question",
      "label": "Question 4"
    },
    {
      "type": "richtext",
      "id": "tab_4_faq_4_answer",
      "label": "Answer 4"
    },
    {
      "type": "text",
      "id": "tab_4_faq_5_question",
      "label": "Question 5"
    },
    {
      "type": "richtext",
      "id": "tab_4_faq_5_answer",
      "label": "Answer 5"
    }
  ],
  "presets": [
    {
      "name": "FAQ tabs"
    }
  ]
}
{% endschema %}
