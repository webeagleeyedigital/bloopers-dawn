{% assign product = section.settings.product | default: product %}

<div class="product-page-wrapper">
  <div class="product-container">

    <!-- =======================
         LEFT: MEDIA GALLERY
    ============================ -->
    <div class="product-left sticky-left">
      <div class="product-media-gallery">
        {% render 'product-media-gallery', 
            media: product.media,
            enable_video_looping: section.settings.enable_video_looping,
            mobile_layout: section.settings.mobile_layout,
            desktop_layout: section.settings.desktop_layout,
            hide_variants: section.settings.hide_variants,
            stacked: section.settings.stacked
        %}
      </div>
    </div>

    <!-- =======================
         RIGHT: PRODUCT DETAILS 
    ============================ -->
    <div class="product-right">

      <!-- Rating + Share -->
      <div class="product-top-row">
        <div class="rating-left">
          <button class="rating-pill">4.5</button>
          <div class="stars">
            {% render 'icon-star' %}
            {% render 'icon-star' %}
            {% render 'icon-star' %}
            {% render 'icon-star' %}
            {% render 'icon-star-half' %}
          </div>
        </div>

        <div class="share-btn">
          {% render 'icon-share' %}
        </div>
      </div>

      <!-- Title + Description -->
      <div class="product-header">
        <div class="separator-line"></div>

        <h1 class="product-title">
          {{ product.title }}
        </h1>

        <div class="separator-line light"></div>

        <div class="product-description">
          {{ product.description | truncatewords: 35 }}
          <a href="#" class="read-more">Read more...</a>
        </div>
      </div>

      <!-- Price + Compare Price + Discount -->
      <div class="product-price-block">
        <div class="price-left">
          <div class="price-row">
            <span class="price-symbol">â‚¹</span>
            <span class="price-main">
              {{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}
            </span>
          </div>

          {% if product.compare_at_price_max > product.price %}
            <p class="price-compare">
              {{ product.compare_at_price_max | money_without_trailing_zeros }}
            </p>
          {% endif %}
        </div>

        {% if product.compare_at_price_max > product.price %}
          <p class="discount-pill">
            {{ product.compare_at_price_max | minus: product.price | times: 100 | divided_by: product.compare_at_price_max | round }}% Off
          </p>
        {% endif %}
      </div>

      <!-- Quantity + Buy Buttons -->
      <div class="product-actions">
        <div class="quantity-block">
          <p class="label">Quantity</p>

          <quantity-input class="quantity-selector">
            <button class="qty-btn minus" name="minus">-</button>
            <input type="number" id="Quantity" name="quantity" value="1" min="1">
            <button class="qty-btn plus" name="plus">+</button>
          </quantity-input>
        </div>

        <div class="btn-group">
          <button class="btn-buy-now">Buy Now</button>

          <product-form class="product-form">
            <form method="post" action="/cart/add">
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
              <button type="submit" class="btn-add-cart">ADD TO CART</button>
            </form>
          </product-form>
        </div>
      </div>

      <!-- Variant (Color Swatches) -->
      <div class="product-colors">
        <p class="label">Product Colors</p>

        {% if product.options_with_values %}
          {% for option in product.options_with_values %}
            {% if option.name contains 'Color' or option.name contains 'colour' %}
              <div class="color-swatches">
                {% for value in option.values %}
                  <div 
                    class="swatch"
                    data-value="{{ value }}"
                    {% if option.selected_value == value %}
                      data-selected="true"
                    {% endif %}
                  >
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>

      <!-- ============================
           TRUST BADGES (Static HTML)
      =============================== -->
      <div class="trust-badges">
        <div class="trust-row">

          <div class="trust-item">
            <div class="icon-circle">
              {% render 'icon-shield-check' %}
            </div>
            <p>100% Genuine Product</p>
          </div>

          <div class="trust-item">
            <div class="icon-circle">
              {% render 'icon-lock' %}
            </div>
            <p>100% Secure Payment</p>
          </div>

          <div class="trust-item">
            <div class="icon-circle">
              {% render 'icon-refresh' %}
            </div>
            <p>7 Days Returns</p>
          </div>

          <div class="trust-item">
            <div class="icon-circle">
              {% render 'icon-cash' %}
            </div>
            <p>Cash on Delivery</p>
          </div>

        </div>
      </div>

      <!-- ============================
           DELIVERY CHECK WIDGET
      =============================== -->
      <div class="delivery-check">
        <p class="label">Check Delivery</p>

        <div class="delivery-row">
          <div class="delivery-field">
            {% render 'icon-location' %}
            <input type="text" placeholder="Enter your pin code" />
          </div>

          <button class="btn-check">Check</button>
        </div>

        <div class="delivery-status">
          <p class="left">Free delivery</p>
          <div class="divider"></div>
          <p class="right">By 12 October</p>
        </div>
      </div>

      <!-- ============================
           SHIROCKET WIDGET
      =============================== -->
      <div id="shirocket-widget">
        <!-- Your widget script auto-injects here -->
      </div>

    </div><!-- END RIGHT -->
  </div><!-- END CONTAINER -->
</div><!-- END WRAPPER -->


{% schema %}
{
  "name": "Main product Custom",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "Main product Custom",
    }
  ]  
}
{% endschema %}
